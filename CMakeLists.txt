cmake_minimum_required(VERSION 3.9)
project(jvm C)

set(CMAKE_C_FLAGS "-std=c11 -Wall -pthread")

add_executable(jvm src/jvm.h src/jtypes.h src/rtda/heap/object.c src/rtda/heap/object.h src/classfile/constant.h src/util/bytecode_reader.h src/util/convert.c src/util/convert.h src/classfile/attribute.c src/classfile/attribute.h src/util/encoding.h src/jvm.c src/native/registry.c src/native/registry.h src/rtda/thread/frame.c src/rtda/thread/frame.h src/slot.h src/rtda/ma/method.c src/rtda/ma/method.h src/rtda/ma/class.c src/rtda/ma/class.h src/rtda/ma/rtcp.c src/rtda/ma/rtcp.h src/rtda/thread/thread.c src/rtda/thread/thread.h src/rtda/ma/access.h src/rtda/ma/field.c src/rtda/ma/field.h src/loader/classloader.c src/loader/classloader.h src/util/util.h src/rtda/heap/mm/halloc.c src/rtda/heap/mm/halloc.h src/rtda/heap/mm/gc.c src/rtda/heap/mm/gc.h src/native/java/io/FileDescriptor.c src/native/java/io/FileInputStream.c src/native/java/io/FileOutputStream.c src/native/java/lang/Class.c src/native/java/lang/Double.c src/native/java/lang/Float.c src/native/java/lang/Object.c src/native/java/lang/String.c src/native/java/lang/System.c src/native/java/lang/Thread.c src/native/java/lang/Throwable.c src/native/java/security/AccessController.c src/native/sun/misc/Unsafe.c src/native/sun/misc/VM.c src/native/sun/reflect/Reflection.c src/interpreter/interpreter.c src/interpreter/interpreter.h src/rtda/heap/strpool.c src/rtda/heap/strpool.h src/rtda/ma/symref.c src/rtda/ma/symref.h src/util/encoding.c src/jtypes.c src/util/hashmap.c src/util/hashmap.h  src/util/vector.c src/util/vector.h src/util/util.c src/slot.c src/native/sun/reflect/NativeConstructorAccessorImpl.c src/native/sun/reflect/NativeMethodAccessorImpl.c src/native/sun/reflect/ConstantPool.c src/rtda/heap/arrobj.c src/rtda/heap/strobj.c src/rtda/heap/clsobj.c src/rtda/primitive_types.c src/rtda/primitive_types.h src/util/bigendian.h src/native/java/util/concurrent/atomic/AtomicLong.c src/native/java/io/WinNTFileSystem.c src/native/java/lang/ClassLoader.c src/native/java/lang/ClassLoader-NativeLibrary.c src/native/sun/misc/Signal.c src/native/sun/io/Win32ErrorMode.c src/output.c src/output.h src/native/java/lang/Runtime.c src/rtda/ma/descriptor.c src/rtda/ma/descriptor.h src/native/sun/misc/Version.c src/native/java/lang/reflect/Field.c src/native/java/lang/reflect/Executable.c src/native/java/nio/Bits.c src/rtda/heap/arrobj.h src/rtda/heap/clsobj.h src/rtda/heap/strobj.h src/interpreter/instruction/method/invokestatic.c src/interpreter/instruction/method/invokespecial.c src/interpreter/instruction/method/invokevirtual.c src/interpreter/instruction/method/invokeinterface.c src/interpreter/instruction/method/invokedynamic.c src/interpreter/instruction/object/new.c src/interpreter/instruction/array/newarray.c src/interpreter/instruction/array/anewarray.c src/interpreter/instruction/array/arraylength.c src/interpreter/instruction/array/multianewarray.c src/interpreter/instruction/field/putstatic.c src/interpreter/instruction/field/getstatic.c src/interpreter/instruction/field/putfield.c src/interpreter/instruction/field/getfield.c src/interpreter/instruction/monitor/monitorenter.c src/interpreter/instruction/monitor/monitorexit.c src/interpreter/instruction/athrow.c src/interpreter/instruction/object/instanceof.c src/interpreter/instruction/object/checkcast.c)

target_link_libraries (jvm libz)
target_link_libraries (jvm libminizip)
